(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-68ebd145"],{8587:function(t,e,i){"use strict";i.r(e);var a=(i("b0c0"),i("5d2d")),n=i("e1d2"),o={data:function(){return{form:{addModal:!1,uploadAble:!1,postId:null,addButtonAble:!0,url:""},outOfArr:!1,auth_token:{},defaultList:[],imgName:"",visible:!1}},methods:{initBannerList:function(){var t=this;n.a.request({url:"/adm/get_banner",method:"get"}).then((function(e){if(1===e.code){var i=e.data.length;t.outOfArr=i>=5,t.defaultList=[];for(var a=0;a<i;a++)t.defaultList.push({id:e.data[a].id,url:e.data[a].cover,title:e.data[a].title})}}))},handleAddBanner:function(){var t=this;(function(t){return n.a.request({url:"/adm/add_banner",method:"post",data:t})})({cover:this.form.url,chain:this.form.postId}).then((function(e){1===e.code&&t.initBannerList(),t.form.postId=null,t.form.uploadAble=!1,t.form.addModal=!1}))},handleRemoveBanner:function(t){var e=this;(function(t){return n.a.request({url:"/adm/del_banner",method:"post",data:t})})({id:t}).then((function(t){e.initBannerList()}))},handleView:function(t){this.imgName=t,this.visible=!0},handleSuccess:function(t,e){1===t.code&&(this.form.url=t.data),this.form.addButtonAble=!1},handleFormatError:function(t){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+t.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(t){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+t.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var t=this.uploadList.length<5;return t||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),t}},mounted:function(){this.initBannerList(),this.auth_token={Authorization:a.a.getToken()}}},r=(i("b7ce"),i("2877")),l=Object(r.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Modal",{attrs:{width:"360"},model:{value:t.form.addModal,callback:function(e){t.$set(t.form,"addModal",e)},expression:"form.addModal"}},[i("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"ios-information-circle"}}),i("span",[t._v("Banner信息")])],1),i("div",{staticStyle:{"text-align":"center"}},[i("p",{staticStyle:{margin:"10px 0 10px 0"}},[t._v(" 关联文章ID "),i("InputNumber",{staticStyle:{width:"70%"},attrs:{min:0},model:{value:t.form.postId,callback:function(e){t.$set(t.form,"postId",e)},expression:"form.postId"}})],1),i("Upload",{attrs:{multiple:!1,headers:t.auth_token,type:"drag",disabled:t.form.uploadAble,"on-success":t.handleSuccess,"before-upload":function(){t.form.uploadAble=!0},"on-remove":function(){t.form.uploadAble=!1},action:"/adm/fit_img"}},[i("div",{staticStyle:{padding:"20px 0"}},[i("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),i("p",[t._v("在此处单击或拖动文件以上传")])],1)])],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"success",disabled:t.form.addButtonAble,size:"large",long:""},on:{click:t.handleAddBanner}},[t._v("添加")])],1)]),i("Card",{staticStyle:{"min-height":"100vh"},attrs:{"dis-hover":""}},[t._l(t.defaultList,(function(e){return i("div",{staticClass:"demo-upload-list",staticStyle:{height:"232px",width:"413px"}},[i("img",{staticStyle:{"object-fit":"contain",border:"1px solid rgb(245 245 245)","border-radius":"0.6rem"},attrs:{src:e.url}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(i){return t.handleView(e.url)}}}),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemoveBanner(e.id)}}}),i("p",{staticStyle:{color:"#e6e6e6"}},[t._v("关联文章："+t._s(e.title)+"}")])],1)])})),i("p",{staticStyle:{"text-align":"center",margin:"0 auto"}},[i("Button",{staticStyle:{margin:"20px"},attrs:{disabled:t.outOfArr},on:{click:function(e){t.form.addModal=!0}}},[t._v("添加Banner")])],1),i("Modal",{attrs:{title:"View Image","footer-hide":"",width:"650px"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"ios-information-circle"}}),i("span",[t._v("Banner预览")])],1),t.visible?i("img",{staticStyle:{width:"612px","object-fit":"contain",height:"344px",border:"1px solid rgb(179 179 179)","border-radius":"0.6rem"},attrs:{src:t.imgName}}):t._e()])],2)],1)}),[],!1,null,null,null);e.default=l.exports},b7ce:function(t,e,i){"use strict";i("c7cf")},c7cf:function(t,e,i){}}]);