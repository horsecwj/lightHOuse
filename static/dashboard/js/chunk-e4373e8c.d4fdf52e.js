(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e4373e8c"],{"159b":function(t,a,e){var r=e("da84"),n=e("fdbc"),o=e("17c2"),i=e("9112");for(var d in n){var s=r[d],l=s&&s.prototype;if(l&&l.forEach!==o)try{i(l,"forEach",o)}catch(t){l.forEach=o}}},"17c2":function(t,a,e){"use strict";var r=e("b727").forEach,n=e("a640")("forEach");t.exports=n?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"2d1d":function(t,a,e){"use strict";e.d(a,"d",(function(){return n})),e.d(a,"e",(function(){return o})),e.d(a,"a",(function(){return i})),e.d(a,"c",(function(){return d})),e.d(a,"b",(function(){return s}));var r=e("e1d2"),n=function(){return r.a.request({url:"/adm/get_category",method:"get"})},o=function(t){return r.a.request({url:"/adm/get_category",method:"get",params:t})},i=function(t){return r.a.request({url:"/adm/add_category",method:"post",data:t})},d=function(t){return r.a.request({url:"/adm/mod_category",method:"post",data:t})},s=function(t){return r.a.request({url:"/adm/del_category",method:"post",data:t})}},"65f0":function(t,a,e){var r=e("861d"),n=e("e8b5"),o=e("b622")("species");t.exports=function(t,a){var e;return n(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!n(e.prototype)?r(e)&&(null===(e=e[o])&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===a?0:a)}},"6d32":function(t,a,e){"use strict";e.d(a,"d",(function(){return n})),e.d(a,"c",(function(){return o})),e.d(a,"b",(function(){return i})),e.d(a,"a",(function(){return d}));var r=e("e1d2"),n=function(t){return r.a.request({url:"/adm/mod_label",method:"post",data:t})},o=function(){return r.a.request({url:"/adm/get_label",method:"get"})},i=function(t){return r.a.request({url:"/adm/del_label",method:"post",data:t})},d=function(t){return r.a.request({url:"/adm/add_label",method:"post",data:t})}},"71a5":function(t,a,e){"use strict";e.r(a);var r=(e("b0c0"),e("159b"),e("7db0"),e("9955")),n=e("2d1d"),o=e("caf6"),i=e("6d32"),d=e("5d2d"),s=e("89cb"),l={components:{Mavon:r.a},data:function(){return{auth_token:{},cateAll:[],tagAll:[],tags:[],disableRadio:!1,langAll:[{key:"cn",value:"中文"},{key:"en",value:"英文"}],draftLoading:!1,finishLoading:!1,dataForm:{id:0,lang:"cn",status:0,cate_id:0,title:"",summary:"",markdown:"",rich_text:"",created:new Date,updated:new Date,cover:"",hot:null,label:[],game_id:null},dataRules:{title:[{required:!0,message:" ",trigger:"blur"}],summary:[{required:!0,message:" ",trigger:"blur"}]},label_list:[],label_id:[],game_list:[]}},methods:{getCate:function(){var t=this;Object(n.e)({lang:this.dataForm.lang}).then((function(a){if(1===a.code){t.cateAll=JSON.parse(JSON.stringify(a.data));for(var e=a.data.length,r=0;r<e;r++){var n=0,o=0,i=t.cateAll[r].parent_id;for(t.cateAll[r].cname=t.cateAll[r].name;a.data[n].id===i&&a.data[n].lang===t.cateAll[r].lang&&(i=a.data[n].parent_id,t.cateAll[r].cname=a.data[n].name+">"+t.cateAll[r].name),!(1===i||o>6);)n>=e?(n=0,o++):n++}}else t.$Message.error({content:a.data,duration:3})}))},initGameLabel:function(){var t=this;Object(i.c)().then((function(a){1===a.code&&(t.label_list=a.data)}))},initGameList:function(){var t=this;Object(s.c)().then((function(a){1===a.code&&(t.game_list=a.data)}))},onChange:function(t){this.dataForm.rich_text=t},emitDraft:function(){var t=this;this.$refs.dataForm.validate((function(a){if(a){if(""===t.dataForm.rich_text)return void t.$Message.warning("请填写内容");t.dataForm.summary=t.dataForm.summary.substring(0,100),t.dataForm.status=1,t.draftLoading=!0,Object(o.a)(t.dataForm).then((function(a){t.draftLoading=!1,1===a.code?t.$Message.success({content:"添加成功",onClose:function(){t.$router.push({name:"post-list",params:{id:t.dataForm.id,lang:t.dataForm.lang}})}}):t.$Message.error({content:a.data,duration:3})}))}}))},emitFinish:function(){var t=this;this.$refs.dataForm.validate((function(a){if(a){if(""===t.dataForm.rich_text)return void t.$Message.warning("请填写内容");t.dataForm.summary=t.dataForm.summary.substring(0,100),t.dataForm.status=2,t.finishLoading=!0,Object(o.a)(t.dataForm).then((function(a){t.finishLoading=!1,1===a.code?t.$Message.success({content:"添加成功",onClose:function(){t.$router.push({name:"post-list",params:{id:t.dataForm.id,lang:t.dataForm.lang}})}}):t.$Message.error({content:a.data,duration:3})}))}}))},onCateChange:function(){this.dataForm.uri="/article?cate_id="+this.dataForm.cate_id+"&id="+this.dataForm.id+"&lang="+this.dataForm.lang},handleChangeChoose:function(t){var a=this;this.dataForm.label=[],t.forEach((function(t){a.label_list.find((function(e){e.id===t&&a.dataForm.label.push(e)}))}))},handleUploadSu:function(t,a){1===t.code&&(this.dataForm.cover=t.data)}},mounted:function(){this.auth_token={Authorization:d.a.getToken()};var t=parseInt(this.$route.params.id);t>0?(this.dataForm.id=t,this.disableRadio=!0):this.dataForm.id=(new Date).getTime();var a=parseInt(this.$route.params.cid);a>0&&(this.dataForm.cate_id=a);var e=this.$route.params.lang;this.dataForm.lang="cn"===e?"en":"cn",this.getCate(),this.initGameLabel(),this.initGameList()}},u=e("2877"),c=Object(u.a)(l,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Card",{attrs:{"dis-hover":""}},[e("Row",{attrs:{gutter:2}},[e("Col",{attrs:{span:"20"}},[e("Form",{ref:"dataForm",attrs:{rules:t.dataRules,model:t.dataForm,"label-width":80}},[e("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{prop:"title",label:"文章标题"}},[e("Input",{staticStyle:{"max-width":"60%"},attrs:{type:"text",placeholder:"请输入标题",maxlength:"100"},model:{value:t.dataForm.title,callback:function(a){t.$set(t.dataForm,"title",a)},expression:"dataForm.title"}}),t._v("   文章ID：   "),e("a",[t._v(t._s(t.dataForm.id))])],1),e("FormItem",{staticStyle:{"margin-bottom":"5px",width:"98%"},attrs:{prop:"summary",label:"文章摘要"}},[e("Row",[e("Input",{attrs:{type:"text",placeholder:"请输入文章摘要"},model:{value:t.dataForm.summary,callback:function(a){t.$set(t.dataForm,"summary",a)},expression:"dataForm.summary"}})],1)],1),e("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{prop:"path",label:"标签"}},[e("Select",{staticStyle:{"max-width":"65%"},attrs:{multiple:""},on:{"on-change":t.handleChangeChoose},model:{value:t.label_id,callback:function(a){t.label_id=a},expression:"label_id"}},t._l(t.label_list,(function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.word))])})),1),e("Button",{staticStyle:{position:"absolute",right:"22%"},attrs:{type:"info",loading:t.draftLoading},on:{click:t.emitDraft}},[e("Icon",{attrs:{type:"ios-trash",size:"20"}}),t._v("存草稿 ")],1),t._v("  "),e("Button",{staticStyle:{position:"absolute",right:"12%"},attrs:{type:"warning",loading:t.finishLoading},on:{click:t.emitFinish}},[e("Icon",{attrs:{type:"ios-send",size:"20"}}),t._v("发 布 ")],1),e("Button",{staticStyle:{position:"absolute",right:"2%"},attrs:{to:{name:"post-list"}}},[t._v("返回列表")])],1)],1),e("mavon",{on:{"on-change":t.onChange},model:{value:t.dataForm.markdown,callback:function(a){t.$set(t.dataForm,"markdown",a)},expression:"dataForm.markdown"}})],1),e("Col",{attrs:{span:"4"}},[e("Card",{attrs:{"dis-hover":"",bordered:!0}},[e("p",{attrs:{slot:"title"},slot:"title"},[e("Icon",{attrs:{type:"ios-settings-outline"}}),t._v(" 设置 ")],1),e("Form",{ref:"optsForm",attrs:{"label-position":"top"}},[e("FormItem",{attrs:{label:"语言"}},[e("RadioGroup",{on:{"on-change":t.getCate},model:{value:t.dataForm.lang,callback:function(a){t.$set(t.dataForm,"lang",a)},expression:"dataForm.lang"}},t._l(t.langAll,(function(a){return e("Radio",{key:a.key,attrs:{label:"cate",label:a.key,disabled:t.disableRadio}},[t._v("["+t._s(a.value)+"]")])})),1)],1),e("FormItem",{attrs:{label:"分类"}},[e("RadioGroup",{attrs:{vertical:!0},on:{"on-change":t.onCateChange},model:{value:t.dataForm.cate_id,callback:function(a){t.$set(t.dataForm,"cate_id",a)},expression:"dataForm.cate_id"}},t._l(t.cateAll,(function(a){return e("Radio",{key:a.id+"-"+a.lang,attrs:{label:"cate",label:a.id}},[e("Tooltip",{attrs:{content:a.cname,placement:"top-start","max-width":"200"}},[t._v(t._s(a.name))])],1)})),1)],1),e("FormItem",{attrs:{label:"发布日期"}},[e("DatePicker",{attrs:{type:"datetime",placeholder:"选择发布日期和时间",clearable:!1,editable:!1},model:{value:t.dataForm.updated,callback:function(a){t.$set(t.dataForm,"updated",a)},expression:"dataForm.updated"}})],1),e("FormItem",{attrs:{label:"热门"}},[e("Select",{model:{value:t.dataForm.hot,callback:function(a){t.$set(t.dataForm,"hot",a)},expression:"dataForm.hot"}},t._l([0,1,2,3,4,5],(function(a){return e("Option",{key:a,attrs:{value:a}},[t._v(t._s(a))])})),1)],1),e("FormItem",{attrs:{label:"关联游戏"}},[e("Select",{on:{"on-change":t.handleChangeChoose},model:{value:t.dataForm.game_id,callback:function(a){t.$set(t.dataForm,"game_id",a)},expression:"dataForm.game_id"}},t._l(t.game_list,(function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.game_name))])})),1)],1),e("FormItem",{attrs:{label:"文章封面",prop:"cover"}},[e("Upload",{attrs:{headers:t.auth_token,action:"/adm/fit_img","on-success":t.handleUploadSu,"show-upload-list":!1}},[e("p",{staticStyle:{"text-align":"center"}},[t._v("点击上传")]),e("Avatar",{staticStyle:{"min-width":"170px",height:"100px"},attrs:{shape:"square",src:t.dataForm.cover,size:"large"}})],1)],1),e("br"),e("br")],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);a.default=c.exports},"7db0":function(t,a,e){"use strict";var r=e("23e7"),n=e("b727").find,o=e("44d2"),i="find",d=!0;i in[]&&Array(1)[i]((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},"89cb":function(t,a,e){"use strict";e.d(a,"a",(function(){return n})),e.d(a,"b",(function(){return o})),e.d(a,"d",(function(){return i})),e.d(a,"c",(function(){return d}));var r=e("e1d2"),n=function(t){return r.a.request({url:"/adm/add_game",method:"post",data:t})},o=function(t){return r.a.request({url:"/adm/del_game",method:"post",data:t})},i=function(t){return r.a.request({url:"/adm/mod_game",method:"post",data:t})},d=function(t){return r.a.request({url:"/adm/get_game",method:"get",params:t})}},a640:function(t,a,e){"use strict";var r=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&r((function(){e.call(null,a||function(){throw 1},1)}))}},b727:function(t,a,e){var r=e("0366"),n=e("44ad"),o=e("7b0b"),i=e("50c4"),d=e("65f0"),s=[].push,l=function(t){var a=1==t,e=2==t,l=3==t,u=4==t,c=6==t,m=7==t,f=5==t||c;return function(h,p,g,b){for(var v,_,F=o(h),y=n(F),k=r(p,g,3),x=i(y.length),w=0,$=b||d,q=a?$(h,x):e||m?$(h,0):void 0;x>w;w++)if((f||w in y)&&(_=k(v=y[w],w,F),t))if(a)q[w]=_;else if(_)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:s.call(q,v)}else switch(t){case 4:return!1;case 7:s.call(q,v)}return c?-1:l||u?u:q}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},caf6:function(t,a,e){"use strict";e.d(a,"d",(function(){return n})),e.d(a,"e",(function(){return o})),e.d(a,"a",(function(){return i})),e.d(a,"c",(function(){return d})),e.d(a,"b",(function(){return s}));var r=e("e1d2"),n=function(t){return r.a.request({url:"/adm/get_article",method:"get",params:t})},o=function(t){return r.a.request({url:"/adm/get_article",method:"get",params:t})},i=function(t){return r.a.request({url:"/adm/add_article",method:"post",data:t})},d=function(t){return r.a.request({url:"/adm/mod_article",method:"post",data:t})},s=function(t){return r.a.request({url:"/adm/del_article",method:"post",data:t})}},e8b5:function(t,a,e){var r=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}}}]);