(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-130f3856"],{"159b":function(e,t,a){var r=a("da84"),n=a("fdbc"),o=a("17c2"),i=a("9112");for(var c in n){var l=r[c],s=l&&l.prototype;if(s&&s.forEach!==o)try{i(s,"forEach",o)}catch(e){s.forEach=o}}},"17c2":function(e,t,a){"use strict";var r=a("b727").forEach,n=a("a640")("forEach");e.exports=n?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"1b44":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c}));var r=a("e1d2"),n=function(){return r.a.request({url:"/adm/get_chain",method:"get"})},o=function(e){return r.a.request({url:"/adm/mod_chain",method:"post",data:e})},i=function(e){return r.a.request({url:"/adm/del_chain",method:"post",data:e})},c=function(e){return r.a.request({url:"/adm/add_chain",method:"post",data:e})}},"65f0":function(e,t,a){var r=a("861d"),n=a("e8b5"),o=a("b622")("species");e.exports=function(e,t){var a;return n(e)&&("function"!=typeof(a=e.constructor)||a!==Array&&!n(a.prototype)?r(a)&&(null===(a=a[o])&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},"6ad6":function(e,t,a){"use strict";a.r(t);var r=(a("159b"),a("b0c0"),a("ac1f"),a("5319"),a("7db0"),a("5d2d")),n=a("89cb"),o=a("1b44"),i=a("9bf1"),c=a("6d32"),l=a("b9a9"),s={data:function(){var e=this;return{auth_token:{},isModify:!1,form:{addModal:!1,select:{currency:[],chain:[],class:[],label:[]},formValidate:{id:null,game_name:"",cover:"",summary:"",status:2,lang:"cn",currency:[],chain:[],label:[],class:[],telegram:"",facebook:"",twitter:"",youtube:"",game_url:"",guide:"",release:0,about_games:"",new:[],stragegy:"",revenue_analysis:"",created:new Date},ruleValidate:{}},tableColumns:[{title:"游戏名称",key:"game_name",align:"center",fixed:"left"},{title:"Token",render:function(e,t){var a=[];return t.row.currency.forEach((function(t){a.push(e("Tag",{props:{color:"green"}},t.currency_name))})),e("p",[a])}},{title:"公链",render:function(e,t){var a=[];return t.row.chain.forEach((function(t){a.push(e("Tag",{props:{color:"blue"}},t.name))})),e("p",[a])}},{title:"类型",render:function(e,t){var a=[];return t.row.class.forEach((function(t){a.push(e("Tag",{props:{color:"purple"}},t.class))})),e("p",[a])}},{title:"发布状态",render:function(e,t){switch(t.row.status){case 1:return e("Tag","测试中");case 2:return e("Tag","正式运营");case 3:return e("Tag","开发中");case 4:return e("Tag","预售中")}}},{title:"状态",render:function(e,t){switch(t.row.release){case 0:return e("Tag","草稿");case 1:return e("Tag","发布")}}},{title:"语言",width:90,render:function(e,t){switch(t.row.lang){case"cn":return e("Tag","中文");case"en":return e("Tag","英文")}}},{title:"创建日期",align:"center",width:180,resizable:!0,render:function(e,t){return e("div",t.row.created.replace(/T|\+08:00/g," "))},sortable:!1},{title:"操作",key:"action",width:130,align:"center",resizable:!0,render:function(t,a){return t("a",[t("Icon",{props:{type:"md-eye",size:"20",color:"#5FB878"},attrs:{title:"预览"},style:{marginRight:"15px"},on:{click:function(){window.open(a.row.uri)}}}),t("Icon",{props:{type:"md-create",size:"20",color:"#FFB800"},attrs:{title:"修改"},style:{marginRight:"15px"},on:{click:function(){e.isModify=!0,e.form.formValidate=JSON.parse(JSON.stringify(a.row)),e.form.select.currency=[],e.form.formValidate.currency.forEach((function(t){e.form.select.currency.push(t.id)})),e.form.select.chain=[],e.form.formValidate.chain.forEach((function(t){e.form.select.chain.push(t.id)})),e.form.select.class=[],e.form.formValidate.class.forEach((function(t){e.form.select.class.push(t.id)})),e.form.select.label=[],e.form.formValidate.label.forEach((function(t){e.form.select.label.push(t.id)})),e.form.addModal=!0}}}),t("Poptip",{props:{confirm:!0,title:"确定要删除吗？"},on:{"on-ok":function(){e.handleDelGame(a.row.id)}}},[t("Icon",{props:{type:"ios-trash",size:"20",color:"#FF5722"},attrs:{title:"删除"}})])])}}],tableData:[],game_currency:[],game_chain:[],game_class:[],game_label:[],page:{article_num:0,page:1,page_num:0,page_size:0}}},methods:{initChain:function(){var e=this;Object(l.c)().then((function(t){1===t.code&&(e.game_currency=t.data)})),Object(o.c)().then((function(t){1===t.code&&(e.game_chain=t.data)})),Object(i.c)().then((function(t){1===t.code&&(e.game_class=t.data)})),Object(c.c)().then((function(t){1===t.code&&(e.game_label=t.data)}))},handleActionAdd:function(){this.form.addModal=!0,this.isModify=!1,this.form.formValidate={id:null,game_name:"",cover:"",summary:"",status:2,lang:"cn",currency:[],chain:[],label:[],class:[],telegram:"",facebook:"",twitter:"",youtube:"",game_url:"",guide:"",release:0,about_games:"",new:[],stragegy:"",revenue_analysis:"",created:new Date},this.form.select.currency=[],this.form.select.chain=[],this.form.select.class=[],this.form.select.label=[]},handleActionGame:function(){var e=this;this.isModify?Object(n.d)(this.form.formValidate).then((function(t){1===t.code&&(e.initGameList(),e.$Message.success({content:t.data,duration:3}))})):Object(n.a)(this.form.formValidate).then((function(t){1===t.code&&(e.initGameList(),e.$Message.success({content:t.data,duration:3}))})),this.form.addModal=!1},handleDraft:function(){this.form.formValidate.release=0,this.handleActionGame()},handleRelease:function(){this.form.formValidate.release=1,this.handleActionGame()},handleChangeCurrency:function(e){var t=this;this.form.formValidate.currency=[],e.forEach((function(e){t.game_currency.find((function(a){a.id===e&&t.form.formValidate.currency.push(a)}))}))},handleChangeChain:function(e){var t=this;this.form.formValidate.chain=[],e.forEach((function(e){t.game_chain.find((function(a){a.id===e&&t.form.formValidate.chain.push(a)}))}))},handleChangeClass:function(e){var t=this;this.form.formValidate.class=[],e.forEach((function(e){t.game_class.find((function(a){a.id===e&&t.form.formValidate.class.push(a)}))}))},handleChangeLabel:function(e){var t=this,a=[];e.forEach((function(e){t.game_label.find((function(t){t.id===e&&a.push(t)}))})),this.form.formValidate.label=a},initGameList:function(){var e=this;Object(n.c)(this.page).then((function(t){1===t.code&&(e.page.article_num=t.article_num,e.page.page=t.page,e.page.page_size=t.page_size,e.page.page_num=t.page_num,e.tableData=t.data)}))},handleSuUpload:function(e,t){this.form.formValidate.cover=e.data},handleDelGame:function(e){var t=this;Object(n.b)({id:e}).then((function(e){t.initGameList()}))},onPiChange:function(e){this.page.page=e,this.initGameList()},onPsChange:function(e){this.page.page=1,this.page.page_size=e,this.initGameList()}},mounted:function(){this.initChain(),this.initGameList(),this.auth_token={Authorization:r.a.getToken()}}},u=a("2877"),m=Object(u.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.form.addModal?a("Card",{staticStyle:{"min-height":"100vh"},attrs:{"dis-hover":""}},[a("p",{staticStyle:{"text-align":"left",margin:"0 auto"}},[a("Button",{staticStyle:{margin:"10px"},on:{click:function(t){e.form.addModal=!1}}},[e._v("返回列表")])],1),a("Form",{ref:"formValidate",attrs:{model:e.form.formValidate,rules:e.form.ruleValidate,"label-width":80}},[a("FormItem",{staticStyle:{height:"200px"},attrs:{prop:"cover",label:"封面"}},[a("img",{staticStyle:{height:"160px","max-width":"100%"},attrs:{src:e.form.formValidate.cover}}),a("Upload",{attrs:{multiple:!1,headers:e.auth_token,action:"/adm/fit_img","on-success":e.handleSuUpload,"show-upload-list":!1}},[a("Button",{staticStyle:{width:"160px"},attrs:{type:"primary"}},[e._v("上传封面")])],1)],1),a("FormItem",{attrs:{prop:"game_name",label:"游戏名称"}},[a("Input",{model:{value:e.form.formValidate.game_name,callback:function(t){e.$set(e.form.formValidate,"game_name",t)},expression:"form.formValidate.game_name"}})],1),a("FormItem",{attrs:{prop:"game_url",label:"游戏官网"}},[a("Input",{model:{value:e.form.formValidate.game_url,callback:function(t){e.$set(e.form.formValidate,"game_url",t)},expression:"form.formValidate.game_url"}})],1),a("FormItem",{attrs:{prop:"chain",label:"关联token"}},[a("Select",{attrs:{multiple:""},on:{"on-change":e.handleChangeCurrency},model:{value:e.form.select.currency,callback:function(t){e.$set(e.form.select,"currency",t)},expression:"form.select.currency"}},e._l(e.game_currency,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.currency_name))])})),1)],1),a("FormItem",{attrs:{prop:"chain",label:"所在公链"}},[a("Select",{attrs:{multiple:""},on:{"on-change":e.handleChangeChain},model:{value:e.form.select.chain,callback:function(t){e.$set(e.form.select,"chain",t)},expression:"form.select.chain"}},e._l(e.game_chain,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),a("FormItem",{attrs:{prop:"telegram",label:"Telegram"}},[a("Input",{model:{value:e.form.formValidate.telegram,callback:function(t){e.$set(e.form.formValidate,"telegram",t)},expression:"form.formValidate.telegram"}})],1),a("FormItem",{attrs:{prop:"facebook",label:"Facebook"}},[a("Input",{model:{value:e.form.formValidate.facebook,callback:function(t){e.$set(e.form.formValidate,"facebook",t)},expression:"form.formValidate.facebook"}})],1),a("FormItem",{attrs:{prop:"twitter",label:"Twitter"}},[a("Input",{model:{value:e.form.formValidate.twitter,callback:function(t){e.$set(e.form.formValidate,"twitter",t)},expression:"form.formValidate.twitter"}})],1),a("FormItem",{attrs:{prop:"youtube",label:"Youtube"}},[a("Input",{model:{value:e.form.formValidate.youtube,callback:function(t){e.$set(e.form.formValidate,"youtube",t)},expression:"form.formValidate.youtube"}})],1),a("FormItem",{attrs:{prop:"introduce",label:"游戏摘要"}},[a("Input",{attrs:{maxlength:"150","show-word-limit":"",type:"textarea"},model:{value:e.form.formValidate.summary,callback:function(t){e.$set(e.form.formValidate,"summary",t)},expression:"form.formValidate.summary"}})],1),a("FormItem",{attrs:{prop:"chain",label:"游戏类型"}},[a("Select",{attrs:{multiple:""},on:{"on-change":e.handleChangeClass},model:{value:e.form.select.class,callback:function(t){e.$set(e.form.select,"class",t)},expression:"form.select.class"}},e._l(e.game_class,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.class))])})),1)],1),a("FormItem",{attrs:{prop:"chain",label:"发布状态"}},[a("Select",{staticStyle:{width:"200px"},model:{value:e.form.formValidate.status,callback:function(t){e.$set(e.form.formValidate,"status",t)},expression:"form.formValidate.status"}},e._l([{id:1,label:"测试中"},{id:2,label:"正式运营"},{id:3,label:"开发中"},{id:4,label:"预售中"}],(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.label))])})),1)],1),a("FormItem",{attrs:{prop:"chain",label:"标签"}},[a("Select",{attrs:{multiple:""},on:{"on-change":e.handleChangeLabel},model:{value:e.form.select.label,callback:function(t){e.$set(e.form.select,"label",t)},expression:"form.select.label"}},e._l(e.game_label,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.word))])})),1)],1),a("FormItem",{attrs:{prop:"introduce",label:"About Games"}},[a("Input",{attrs:{maxlength:"100",rows:4,"show-word-limit":"",type:"textarea"},model:{value:e.form.formValidate.about_games,callback:function(t){e.$set(e.form.formValidate,"about_games",t)},expression:"form.formValidate.about_games"}})],1),a("FormItem",{attrs:{prop:"introduce",label:"Strategy"}},[a("Input",{attrs:{maxlength:"100",rows:4,"show-word-limit":"",type:"textarea"},model:{value:e.form.formValidate.stragegy,callback:function(t){e.$set(e.form.formValidate,"stragegy",t)},expression:"form.formValidate.stragegy"}})],1),a("FormItem",{attrs:{prop:"introduce",label:"Revenue Analysis"}},[a("Input",{attrs:{maxlength:"100",rows:4,"show-word-limit":"",type:"textarea"},model:{value:e.form.formValidate.revenue_analysis,callback:function(t){e.$set(e.form.formValidate,"revenue_analysis",t)},expression:"form.formValidate.revenue_analysis"}})],1),a("FormItem",{attrs:{prop:"created",label:"上线时间"}},[a("DatePicker",{attrs:{type:"datetime",placeholder:"选择发布日期和时间",editable:!1},model:{value:e.form.formValidate.created,callback:function(t){e.$set(e.form.formValidate,"created",t)},expression:"form.formValidate.created"}})],1),a("FormItem",[a("Button",{attrs:{type:"info"},on:{click:e.handleDraft}},[e._v("存草稿")]),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleRelease}},[e._v("发布")])],1)],1)],1):a("Card",{staticStyle:{"min-height":"100vh"},attrs:{"dis-hover":""}},[a("p",{staticStyle:{"text-align":"left",margin:"0 auto"}},[a("Button",{staticStyle:{"margin-bottom":"10px"},on:{click:e.handleActionAdd}},[e._v("添加游戏")]),a("Button",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{type:"info",icon:"md-refresh"},on:{click:e.initGameList}},[e._v("刷新")])],1),a("Table",{attrs:{width:"100%",border:"",columns:e.tableColumns,data:e.tableData}}),a("br"),a("Page",{attrs:{total:e.page.article_num,current:e.page.page,"page-size":e.page.page_size,"page-size-opts":[8,10,12,15,20,30],"show-sizer":"","show-elevator":"","show-total":""},on:{"update:current":function(t){return e.$set(e.page,"page",t)},"on-change":e.onPiChange,"on-page-size-change":e.onPsChange}})],1)}),[],!1,null,null,null);t.default=m.exports},"6d32":function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c}));var r=a("e1d2"),n=function(e){return r.a.request({url:"/adm/mod_label",method:"post",data:e})},o=function(){return r.a.request({url:"/adm/get_label",method:"get"})},i=function(e){return r.a.request({url:"/adm/del_label",method:"post",data:e})},c=function(e){return r.a.request({url:"/adm/add_label",method:"post",data:e})}},"7db0":function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").find,o=a("44d2"),i="find",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)},"89cb":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return c}));var r=a("e1d2"),n=function(e){return r.a.request({url:"/adm/add_game",method:"post",data:e})},o=function(e){return r.a.request({url:"/adm/del_game",method:"post",data:e})},i=function(e){return r.a.request({url:"/adm/mod_game",method:"post",data:e})},c=function(e){return r.a.request({url:"/adm/get_game",method:"get",params:e})}},"9bf1":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var r=a("e1d2"),n=function(){return r.a.request({url:"/adm/get_class",method:"get"})},o=function(e){return r.a.request({url:"/adm/del_class",method:"post",data:e})},i=function(e){return r.a.request({url:"/adm/add_class",method:"post",data:e})}},a640:function(e,t,a){"use strict";var r=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&r((function(){a.call(null,t||function(){throw 1},1)}))}},b727:function(e,t,a){var r=a("0366"),n=a("44ad"),o=a("7b0b"),i=a("50c4"),c=a("65f0"),l=[].push,s=function(e){var t=1==e,a=2==e,s=3==e,u=4==e,m=6==e,d=7==e,f=5==e||m;return function(h,p,g,b){for(var y,_,v=o(h),w=n(v),V=r(p,g,3),k=i(w.length),x=0,I=b||c,F=t?I(h,k):a||d?I(h,0):void 0;k>x;x++)if((f||x in w)&&(_=V(y=w[x],x,v),e))if(t)F[x]=_;else if(_)switch(e){case 3:return!0;case 5:return y;case 6:return x;case 2:l.call(F,y)}else switch(e){case 4:return!1;case 7:l.call(F,y)}return m?-1:s||u?u:F}};e.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterOut:s(7)}},b9a9:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return c}));var r=a("e1d2"),n=function(e){return r.a.request({url:"/adm/add_currency",method:"post",data:e})},o=function(e){return r.a.request({url:"/adm/del_currency",method:"post",data:e})},i=function(e){return r.a.request({url:"/adm/mod_currency",method:"post",data:e})},c=function(){return r.a.request({url:"/adm/get_currency",method:"get"})}},e8b5:function(e,t,a){var r=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);